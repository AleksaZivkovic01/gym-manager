<section class="packages">
  <h2>Membership packages</h2>

  <div class="loading" *ngIf="loading">
    <p>Loading packages...</p>
  </div>

  <div class="packages-grid" *ngIf="!loading">
    <article class="card" 
      [ngClass]=
      "{
      'basic': pkg.name === 'Basic',
      'standard': pkg.name === 'Standard',
      'premium': pkg.name === 'Premium'
      }" 
    *ngFor="let pkg of packages"
    >
      <h3>{{ pkg.name }}</h3>
      <p class="plan-description">{{ pkg.description || 'Package without description' }}</p>
      <div class="package-info">
        <div class="price">{{ formatPrice(pkg.price) }} / month</div>
        <div class="sessions">{{ getSessionsLabel(pkg.sessionsPerMonth) }}</div>
      </div>
      <div class="package-actions" *ngIf="currentUser && currentUser.role === 'member'">
        <button 
          *ngIf="currentMember && !hasPackage(pkg.id)" 
          (click)="selectPackage(pkg)" 
          class="btn-select">
          Select package
        </button>
        <span *ngIf="currentMember && hasPackage(pkg.id)" class="selected-badge">
          âœ“ Your current package
        </span>
        <span *ngIf="!currentMember" class="loading-member">
          Loading data...
        </span>
      </div>
      <div class="package-actions" *ngIf="!currentUser || currentUser.role !== 'member'">
        <a routerLink="/login" class="btn-login">Login to select a package</a>
      </div>
    </article>
    <div *ngIf="packages.length === 0" class="no-packages">
      <p>No available packages.</p>
    </div>
  </div>
</section>


